<!DOCTYPE HTML>
<head>
 <meta charset="UTF-8">
 <style type="text/css">
 body{
   cursor: pointer;
 }
canvas{
  border:1px solid #c3c3c3;
  position:absolute;
  top: 100px;
  left: 100px;
}
#color{
  position: absolute;
  left: 3px;
  top: 370px;
  width: 80px;
  height: 20px;
}
#crosshair{
  width:50px;
  height:50px;
}
#eraser, #marker{
  width:50px;
  height:50px;
  transition: width 1s, height 1s,top 2s, left 2s;
}
#eraser{
  position:absolute;
  top: 290px;
  left:19px;
}
#marker{
  position: absolute;
  top: 200px;
  left: 19px;
}
#eraser:hover, #marker:hover {
  width:70px;
  height:70px;
}
#paint{
  position: absolute;
  width:100px;
  height:100px;
  top: 300px;
}
#reset{
  position: absolute;
  top: 140px;
color: blue;
border: 1px solid;
background: lightblue;
padding: 8px 15px 8px;
border-radius: 10%;
transition: background-color 1.2s;
}
#reset:hover{
  background-color: #0099f2;
}
 </style>
</head>
<body>
 <p id = "grid" style = "display: none;"></p>
  <button onclick = "location.reload()" id = "reset">Reset</button>
  <img src = "marker.png" id = "marker" onclick = "grid.eraser = false">
  <img src = "eraser.png" id = "eraser" onclick = "grid.erase()">
  <input type = "color" id = "color" value = "#ff0000" onchange = "grid.getColor()">

  <canvas id="myCanvas" width="450" height="450"> </canvas>

<script type="text/javascript">
 var gridArr = [];
var isGrid = confirm("Would you like a grid on your canvas?");
var color = document.getElementById("color").value;
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
size = 20;
Gsize = canvas.width/size;
var mouseX;
var mouseY;
var drag = false;
class Grid{
  constructor(){
    this.eraser = false;
  }

  square(){
    var x = Math.floor(mouseX/Gsize) * Gsize;
    var y = Math.floor(mouseY/Gsize) * Gsize;

   
   document.getElementById("grid").innerHTML = "[";
   let hasValue = false;

     if(this.eraser){
      ctx.fillStyle = "#ffffff";
      hasValue = true;
    } else{
    ctx.fillStyle = color;
  }

for(var i=0;i<gridArr.length;i++){
if(gridArr[i][0] == x/Gsize && gridArr[i][1] == y/Gsize){
 if(this.eraser){
 gridArr.splice(i, 1);
 }
hasValue = true;
}
if(gridArr[i][0] < 0 || gridArr[i][0] > 19 || gridArr[i][1] < 0 || gridArr[i][1] > 19){
  gridArr.splice(i, 1);
}

}
   if(!hasValue){
   gridArr.push([x/Gsize,y/Gsize]);
   }
   hasValue = false;
 

    ctx.fill();
    ctx.fillRect(x,y,Gsize,Gsize);
    ctx.stroke();

for(var i=0;i<gridArr.length;i++){
  document.getElementById("grid").innerHTML += "[" + gridArr[i][0] + "," + gridArr[i][1] + "],";
}
document.getElementById("grid").innerHTML += "]";
this.drawGrid();
  }
  getColor(){
    color = document.getElementById("color").value
  }
 drawGrid(){
   ctx.fillStyle = "black";
  ctx.beginPath();
  for(var x=0;x<canvas.width;x+=Gsize){
  ctx.font = "20px Arial";
ctx.fillText(x/Gsize,x,20);
  ctx.moveTo(x, 0);
  ctx.lineTo(x, canvas.height);
  ctx.stroke();
}
for(var y=0;y<canvas.height;y+=Gsize){
  ctx.font = "20px Arial";
ctx.fillText((y/Gsize),2,y+Gsize)
  ctx.moveTo(0, y);
  ctx.lineTo(canvas.width, y);
  ctx.stroke();
}
}
erase(){
    this.eraser = true;
  }
}
var grid = new Grid();
if(isGrid){
   grid.drawGrid();
}
document.onmousedown = function(e){ drag = true;   mouseX = e.clientX - 100;
  mouseY =  e.clientY - 100;
  grid.square(); }
  document.onmouseup = function(){drag = false;}
onmousemove = function(e){
if(drag){
  mouseX = e.clientX - 100;
  mouseY =  e.clientY - 100;
  grid.square();
}
}
</script>
</body>
</html>
